# VectorDB 비교

- 데이터

| Name    | Record count | Data size |
| ------- | ------------ | --------- |
| msmarco | 8,841,823    | 36.21GB   |



- 공통 설정

| CPU     | Memory                 | ef_construction | m    | quantization | index_type | similarity  | num_candidates | size |
| ------- | ---------------------- | --------------- | ---- | ------------ | ---------- | ----------- | -------------- | ---- |
| 16 core | 32GB(ES JVM Heap: 8GB) | 100             | 16   | int8         | HNSW       | dot_product | 100            | 50   |

- 색인 테스트

| DB             | 인덱스 사이즈 (GB) | CPU 사용률 (%) | 메모리 사용률 (%) | 총 색인 시간 (sec) | 평균 소요 시간 (sec) - per batch |
| -------------- | ------------------ | -------------- | ----------------- | ------------------ | -------------------------------- |
| ES             |                    |                |                   |                    |                                  |
| ES_force_merge | 55.70              | 75             | 60.00             | 4,615.00           | 256.38                           |
| Milvus         | 76GB               | 70.00          | 72.52(99.13)      | 4,698.00           | 261.00                           |

- 검색 테스트

| DB             | CPU 사용률 (%) | 메모리 사용률 (%) | 검색 시간(s) | 평균 검색 시간 (ms) | p95(ms) | p99(ms) | R@5  | R@10 | R@20 | R@50 |
| -------------- | -------------- | ----------------- | ------------ | ------------------- | ------- | ------- | ---- | ---- | ---- | ---- |
| ES             | 56.25          | 50.39             | 2,784.00     | 27.84               | 48.98   | 72.60   | 48   | 59   | 68   | 78   |
| ES_force_merge | 21.87          | 35.00             | 865.28       | 8.65                | 9.78    | 10.72   | 48   | 58   | 67   | 78   |
| Milvus         | 61.25          | 65.34             | 1,055.47     | 10.55               | 13.32   | 14.82   | 49   | 59   | 69   | 80   |

- 부하 테스트

| DB             | CPU 사용률 (%) | 메모리 사용률 (%) | RPS  | 평균 응답 시간 (ms) | p99(ms) |
| -------------- | -------------- | ----------------- | ---- | ------------------- | ------- |
| ES             | 100.00         | 50.22             | 100  | 452                 | 620     |
| ES_force_merge | 100.00         | 63.81             | 512  | 43                  | 120     |
| Milvus         | 100.00         | 60.32             | 236  | 163                 | 280     |





